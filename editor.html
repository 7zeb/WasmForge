<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>WasmForge v9 - Editor</title>
  <link rel="stylesheet" href="./css/reset.css">
  <link rel="stylesheet" href="./css/variables.css">
  <link rel="stylesheet" href="./css/layout.css">
  <link rel="stylesheet" href="./css/components.css">
  <link rel="icon" href="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'><text y='.9em' font-size='90'>⚡</text></svg>">
</head>
<body>

  <!-- Top Menu Bar -->
  <header class="topbar">
    <div class="topbar-left">
      <div class="app-logo">⚡</div>
      <div class="app-title">WasmForge <span class="version">v9</span></div>
      <nav class="menu">
        <button class="menu-item" data-menu="file">File</button>
        <button class="menu-item" data-menu="edit">Edit</button>
        <button class="menu-item" data-menu="view">View</button>
        <button class="menu-item" data-menu="help">Help</button>
      </nav>
    </div>
    
    <div class="topbar-center">
      <input type="text" class="project-name" value="Untitled Project" spellcheck="false">
    </div>
    
    <div class="topbar-right">
      <button class="topbar-button" id="theme-toggle" title="Toggle Theme">
        <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
          <circle cx="12" cy="12" r="5"/>
          <line x1="12" y1="1" x2="12" y2="3"/>
          <line x1="12" y1="21" x2="12" y2="23"/>
          <line x1="4.22" y1="4.22" x2="5.64" y2="5.64"/>
          <line x1="18.36" y1="18.36" x2="19.78" y2="19.78"/>
          <line x1="1" y1="12" x2="3" y2="12"/>
          <line x1="21" y1="12" x2="23" y2="12"/>
          <line x1="4.22" y1="19.78" x2="5.64" y2="18.36"/>
          <line x1="18.36" y1="5.64" x2="19.78" y2="4.22"/>
        </svg>
      </button>
      <div class="status-indicator" id="ffmpeg-status">
        <span class="status-dot"></span>
        <span class="status-text">Loading...</span>
      </div>
    </div>
  </header>

  <!-- Main Editor Layout -->
  <div class="editor-layout">
    
    <!-- Left Sidebar - Media Pool -->
    <aside class="sidebar sidebar-left">
      <div class="panel-header">
        <div class="panel-tabs">
          <button class="panel-tab active" data-tab="media">Media</button>
          <button class="panel-tab" data-tab="effects">Effects</button>
        </div>
      </div>
      
      <div class="panel-content">
        <!-- Media Tab -->
        <div class="tab-pane active" id="media-tab">
          <div class="import-zone" id="import-zone">
            <svg width="48" height="48" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
              <path d="M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"/>
              <polyline points="17 8 12 3 7 8"/>
              <line x1="12" y1="3" x2="12" y2="15"/>
            </svg>
            <p>Import Media</p>
            <span>Drag & drop or click to browse</span>
          </div>
          <div class="media-grid" id="media-grid">
            <!-- Media items will be inserted here -->
          </div>
        </div>
        
        <!-- Effects Tab -->
        <div class="tab-pane" id="effects-tab">
          <div class="effects-list">
            <div class="effect-item">Fade In</div>
            <div class="effect-item">Fade Out</div>
            <div class="effect-item">Blur</div>
            <div class="effect-item">Brightness</div>
          </div>
        </div>
      </div>
    </aside>

    <!-- Center - Preview Monitor -->
    <main class="main-content">
      <div class="preview-section">
        <div class="preview-header">
          <span class="preview-title">Preview</span>
          <div class="preview-controls">
            <select class="aspect-ratio-select" id="aspect-ratio">
              <option value="16:9">16:9</option>
              <option value="9:16">9:16</option>
              <option value="1:1">1:1</option>
              <option value="4:5">4:5</option>
            </select>
          </div>
        </div>
        
        <div class="preview-monitor">
          <div class="preview-container" id="preview-container">
            <video id="preview-video"></video>
            <div class="preview-placeholder" id="preview-placeholder">
              <svg width="64" height="64" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                <polygon points="5 3 19 12 5 21 5 3"/>
              </svg>
              <p>Import media to start editing</p>
            </div>
          </div>
        </div>

        <!-- Transport Controls -->
        <div class="transport-bar">
          <div class="transport-left">
            <span class="timecode" id="current-time">00:00:00:00</span>
          </div>
          
          <div class="transport-center">
            <button class="transport-btn" id="btn-start" title="Go to Start">
              <svg width="20" height="20" viewBox="0 0 24 24" fill="currentColor">
                <path d="M6 4h2v16H6V4zm4 0l10 8-10 8V4z"/>
              </svg>
            </button>
            <button class="transport-btn" id="btn-prev" title="Previous Frame">
              <svg width="20" height="20" viewBox="0 0 24 24" fill="currentColor">
                <path d="M15.41 7.41L14 6l-6 6 6 6 1.41-1.41L10.83 12z"/>
              </svg>
            </button>
            <button class="transport-btn transport-btn-play" id="btn-play" title="Play/Pause">
              <svg width="24" height="24" viewBox="0 0 24 24" fill="currentColor">
                <path d="M8 5v14l11-7z"/>
              </svg>
            </button>
            <button class="transport-btn" id="btn-next" title="Next Frame">
              <svg width="20" height="20" viewBox="0 0 24 24" fill="currentColor">
                <path d="M8.59 16.59L10 18l6-6-6-6-1.41 1.41L13.17 12z"/>
              </svg>
            </button>
            <button class="transport-btn" id="btn-end" title="Go to End">
              <svg width="20" height="20" viewBox="0 0 24 24" fill="currentColor">
                <path d="M16 4v16h2V4h-2zM6 4v16l10-8z"/>
              </svg>
            </button>
          </div>
          
          <div class="transport-right">
            <span class="timecode" id="total-time">00:00:00:00</span>
          </div>
        </div>
      </div>

      <!-- Timeline Section -->
      <div class="timeline-section">
        <div class="timeline-toolbar">
          <div class="toolbar-left">
            <button class="toolbar-btn active" id="tool-select" title="Select Tool (V)">
              <svg width="18" height="18" viewBox="0 0 24 24" fill="currentColor">
                <path d="M3 3h2l10 17-5-7-7 4V3z"/>
              </svg>
            </button>
            <button class="toolbar-btn" id="tool-razor" title="Razor Tool (C)">
              <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                <circle cx="6" cy="6" r="3"/>
                <circle cx="18" cy="18" r="3"/>
                <line x1="8" y1="8" x2="16" y2="16"/>
              </svg>
            </button>
            <div class="toolbar-divider"></div>
            <button class="toolbar-btn" id="btn-undo" title="Undo">
              <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                <path d="M3 7v6h6"/>
                <path d="M21 17a9 9 0 00-9-9 9 9 0 00-9 9"/>
              </svg>
            </button>
            <button class="toolbar-btn" id="btn-redo" title="Redo">
              <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                <path d="M21 7v6h-6"/>
                <path d="M3 17a9 9 0 019-9 9 9 0 019 9"/>
              </svg>
            </button>
          </div>
          
          <div class="toolbar-right">
            <button class="toolbar-btn" id="btn-zoom-out">-</button>
            <input type="range" class="zoom-slider" id="zoom-slider" min="20" max="200" value="100">
            <button class="toolbar-btn" id="btn-zoom-in">+</button>
            <span class="zoom-level" id="zoom-level">100%</span>
          </div>
        </div>

        <div class="timeline-container" id="timeline-container">
          <div class="timeline-ruler" id="timeline-ruler"></div>
          <div class="timeline-tracks" id="timeline-tracks">
            <!-- Tracks will be generated here -->
          </div>
          <div class="timeline-playhead" id="playhead">
            <div class="playhead-handle"></div>
            <div class="playhead-line"></div>
          </div>
        </div>
      </div>
    </main>

    <!-- Right Sidebar - Inspector -->
    <aside class="sidebar sidebar-right">
      <div class="panel-header">
        <span class="panel-title">Inspector</span>
      </div>
      
      <div class="panel-content">
        <div class="inspector-empty" id="inspector-empty">
          <svg width="48" height="48" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
            <path d="M3 3h2l10 17-5-7-7 4V3z"/>
          </svg>
          <p>Select a clip to edit</p>
        </div>
        
        <div class="inspector-properties" id="inspector-properties" style="display: none;">
          <div class="property-group">
            <div class="property-label">Transform</div>
            <div class="property-row">
              <label>Scale</label>
              <input type="range" id="prop-scale" min="10" max="200" value="100">
              <span class="property-value" id="scale-value">100%</span>
            </div>
            <div class="property-row">
              <label>Opacity</label>
              <input type="range" id="prop-opacity" min="0" max="100" value="100">
              <span class="property-value" id="opacity-value">100%</span>
            </div>
          </div>
          
          <div class="property-group">
            <div class="property-label">Audio</div>
            <div class="property-row">
              <label>Volume</label>
              <input type="range" id="prop-volume" min="0" max="200" value="100">
              <span class="property-value" id="volume-value">100%</span>
            </div>
          </div>
        </div>
      </div>
    </aside>

  </div>

  <!-- Hidden file input -->
  <input type="file" id="file-input" multiple accept="video/*,audio/*,image/*" hidden>

  <!-- Loading Modal -->
  <div class="modal" id="loading-modal">
    <div class="modal-content">
      <div class="loading-spinner"></div>
      <h3>Loading FFmpeg</h3>
      <p id="loading-status">Initializing...</p>
      <div class="progress-bar">
        <div class="progress-fill" id="loading-progress"></div>
      </div>
    </div>
  </div>

  <script type="module" src="./js/main.js"></script>
</body>
</html>